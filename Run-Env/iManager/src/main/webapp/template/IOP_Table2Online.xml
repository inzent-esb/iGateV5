<?xml version="1.0" encoding="UTF-8"?>
<Operation name="Table-Online Interface" privilegeId="Administrator" privateYn="N" type="I" operationLogLevel="N/A" xaTransactionAttribute="S" operationGroup="embed.mix"> 
  <Variables> 
    <Variable type="com.inzent.igate.repository.meta.InterfaceService" name="interfaceService" desc="Interface Service" isParameter="false">
      <Value><![CDATA[]]></Value>
      <ConstantExpression><![CDATA[]]></ConstantExpression>
    </Variable>
    <Variable type="com.inzent.igate.message.Record" name="reqData" desc="서비스 요청 레코드" isParameter="false">
      <Value><![CDATA[]]></Value>
      <ConstantExpression><![CDATA[]]></ConstantExpression>
    </Variable>
    <Variable type="com.inzent.igate.message.Record" name="resData" desc="서비스 응답 레코드" isParameter="false">
      <Value><![CDATA[]]></Value>
      <ConstantExpression><![CDATA[]]></ConstantExpression>
    </Variable>
    <Variable type="java.lang.Object" name="valueObject" desc="Value Object" isParameter="false">
      <Value><![CDATA[]]></Value>
      <ConstantExpression><![CDATA[]]></ConstantExpression>
    </Variable>
    <Variable type="java.lang.Boolean" name="sync" desc="" isParameter="false">
      <Value><![CDATA[]]></Value>
      <ConstantExpression><![CDATA[]]></ConstantExpression>
    </Variable>
    <Variable type="java.lang.Throwable" name="th" desc="" isParameter="false">
      <Value><![CDATA[]]></Value>
      <ConstantExpression><![CDATA[]]></ConstantExpression>
    </Variable>
    <Variable type="com.inzent.igate.adapter.AdapterParameter" name="adapterParameter" desc="Adapter Parameter" isParameter="true"/>
  </Variables>  
  <Activities> 
    <Start uniqueKey="0000" index="0" desc="Start" xPos="623" yPos="19"> 
      <Parameter type="com.inzent.igate.adapter.AdapterParameter" desc="Adapter Parameter" from="Variable" dynamic="false">
        <Value><![CDATA[adapterParameter]]></Value>
      </Parameter>
    </Start>  
    <End uniqueKey="0001" index="1" desc="End" xPos="837" yPos="543"/>  
    <ForEach width="728" height="457" uniqueKey="0002" index="13" desc="Active Data" xPos="41" yPos="326"> 
      <Activities> 
        <ForEach width="332" height="290" uniqueKey="000g" index="4" desc="ForEach" xPos="47" yPos="33"> 
          <Activities> 
            <Activity uniqueKey="0004" index="2" desc="Mapping Table to Online" id="MappingTableToOnline" xPos="77" yPos="42"> 
              <Parameter type="com.inzent.igate.message.Record" desc="Target Record" from="Variable" dynamic="false">
                <Value><![CDATA[reqData]]></Value>
              </Parameter>
              <Parameter type="com.inzent.igate.adapter.AdapterParameter" desc="Source AdapterParameter" from="Variable" dynamic="false">
                <Value><![CDATA[adapterParameter]]></Value>
              </Parameter>
              <Parameter type="com.inzent.igate.repository.meta.InterfaceService" desc="Interface-Service Information" from="Variable" dynamic="false">
                <Value><![CDATA[interfaceService]]></Value>
              </Parameter>
              <Parameter type="java.lang.Object" desc="Source Object" from="Variable" dynamic="false">
                <Value><![CDATA[valueObject]]></Value>
              </Parameter>
            </Activity>  
            <Activity uniqueKey="0005" index="3" desc="Execute Service" id="ExecuteService" xPos="102" yPos="93"> 
              <Parameter type="com.inzent.igate.message.Record" desc="Respone Record" from="Variable" dynamic="false">
                <Value><![CDATA[resData]]></Value>
              </Parameter>
              <Parameter type="java.lang.String" desc="Service ID" from="JavaOperation" dynamic="false">
                <Value><![CDATA[interfaceService.getPk().getServiceId()]]></Value>
                <JavaExpression><![CDATA[interfaceService.getPk().getServiceId()]]></JavaExpression>
              </Parameter>
              <Parameter type="java.lang.Boolean" desc="Push To Queue" from="JavaOperation" dynamic="false">
                <Value><![CDATA[false == sync]]></Value>
                <JavaExpression><![CDATA[false == sync]]></JavaExpression>
              </Parameter>
              <Parameter type="com.inzent.igate.message.Record" desc="Request Record" from="Variable" dynamic="false">
                <Value><![CDATA[reqData]]></Value>
              </Parameter>
            </Activity>  
            <Activity uniqueKey="000m" index="4" desc="Verify Service Response" id="VerifyServiceResponse" xPos="16" yPos="201"> 
              <Parameter type="com.inzent.igate.repository.meta.InterfaceService" desc="Interface-Service Information" from="Variable" dynamic="false">
                <Value><![CDATA[null]]></Value>
              </Parameter>
            </Activity>  
            <Condition uniqueKey="000p" index="5" desc="Condition" xPos="117" yPos="147">
              <When target="4" desc="sync">
                <VariableExpression name="sync"/>
              </When>
              <Others target="6" desc="async"/>
              <Value><![CDATA[
// sync
if ( sync ) 
   return 0;
// async
else 
   return 1;]]></Value>
            </Condition>
            <Script uniqueKey="000q" index="6" desc="Script" xPos="225" yPos="201">
              <Value><![CDATA[return 0 ;]]></Value>
            </Script>
          </Activities>  
          <Transitions> 
            <Transition from="start" to="2" order="0" fromTerminal="bottom" toTerminal="top"> 
              <bendPoints/> 
            </Transition>  
            <Transition from="2" to="3" order="0" fromTerminal="bottom" toTerminal="top"> 
              <bendPoints/> 
            </Transition>  
            <Transition from="4" to="end" order="0" fromTerminal="bottom" toTerminal="unknown"> 
              <bendPoints/> 
            </Transition>  
            <Transition from="3" to="5" order="0" fromTerminal="bottom" toTerminal="top"> 
              <bendPoints/> 
            </Transition>
            <Transition from="5" to="4" order="0" desc="sync" fromTerminal="bottom" toTerminal="top">
              <bendPoints/>
            </Transition>
            <Transition from="5" to="6" order="1" desc="async" fromTerminal="bottom" toTerminal="top">
              <bendPoints/>
            </Transition>
            <Transition from="6" to="end" order="0" fromTerminal="bottom" toTerminal="bottom">
              <bendPoints/>
            </Transition>
          </Transitions>  
          <Condition/>  
          <Parameter type="java.lang.Iterable" desc="Collection Varable" from="JavaOperation" dynamic="false"> 
            <Value><![CDATA[adapterParameter.getInterface().getInterfaceServices()]]></Value>  
            <JavaExpression><![CDATA[adapterParameter.getInterface().getInterfaceServices()]]></JavaExpression> 
          </Parameter>  
          <Parameter type="java.lang.Object" desc="item Variable" from="Variable" dynamic="false"> 
            <Value><![CDATA[interfaceService]]></Value> 
          </Parameter>  
          <Parameter type="java.lang.Number" desc="Index Variable" from="Variable" dynamic="false"> 
            <Value><![CDATA[null]]></Value> 
          </Parameter>  
          <Parameter type="java.lang.Number" desc="Start" from="Variable" dynamic="false"> 
            <Value><![CDATA[null]]></Value> 
          </Parameter>  
          <Parameter type="java.lang.Number" desc="End" from="Variable" dynamic="false"> 
            <Value><![CDATA[null]]></Value> 
          </Parameter>  
          <Parameter type="java.lang.Number" desc="Step" from="Variable" dynamic="false"> 
            <Value><![CDATA[null]]></Value> 
          </Parameter> 
        </ForEach>  
        <Activity uniqueKey="0008" index="6" desc="Update Result" id="UpdateResult" xPos="306" yPos="367"> 
          <Parameter type="com.inzent.igate.adapter.AdapterParameter" desc="AdapterParameter" from="Variable" dynamic="false">
            <Value><![CDATA[adapterParameter]]></Value>
          </Parameter>
          <Parameter type="java.lang.Object" desc="Response Object" from="Method" dynamic="false">
            <Value><![CDATA[adapterParameter.getRequestData()]]></Value>
            <MethodExpression variableName="adapterParameter">
              <FunctionExpression className="com.inzent.igate.adapter.AdapterParameter" methodName="getRequestData" argumentTypes="" argumentType="java.lang.Object"/>
            </MethodExpression>
          </Parameter>
          <Parameter type="java.lang.Throwable" desc="Exception" from="Variable" dynamic="false">
            <Value><![CDATA[th]]></Value>
          </Parameter>
        </Activity>  
        <FaultHandlers uniqueKey="0009" index="7" desc="FaultHandler" xPos="533" yPos="89"> 
          <CatchAll target="13" desc=""/>
        </FaultHandlers>  
        <ReThrow uniqueKey="000c" index="10" desc="ReThrow" xPos="609" yPos="230"/>  
        <Activity uniqueKey="000i" index="12" desc="Save The Exception" id="SaveException" xPos="410" yPos="230"> 
          <Parameter type="java.lang.Throwable" desc="Throwable" from="Variable" dynamic="false">
            <Value><![CDATA[throwed]]></Value>
          </Parameter>
        </Activity>  
        <Condition uniqueKey="000r" index="13" desc="Condition" xPos="528" yPos="158">
          <When target="12" desc="sync">
            <VariableExpression name="sync"/>
          </When>
          <Others target="10" desc="async"/>
          <Value><![CDATA[
// sync
if ( sync ) 
   return 0;
// async
else 
   return 1;]]></Value>
        </Condition>
        <Activity uniqueKey="000s" index="14" desc="Get Throwed Exception" id="GetThrowable" xPos="400" yPos="302">
          <Parameter type="java.lang.Throwable" desc="Throwable Var" from="Variable" dynamic="false">
            <Value><![CDATA[th]]></Value>
          </Parameter>
          <Parameter type="java.lang.Throwable" desc="Throwed Error" from="Variable" dynamic="false">
            <Value><![CDATA[throwed]]></Value>
          </Parameter>
        </Activity>
      </Activities>  
      <Transitions> 
        <Transition from="start" to="4" order="0" fromTerminal="bottom" toTerminal="top"> 
          <bendPoints/> 
        </Transition>  
        <Transition from="6" to="end" order="0" fromTerminal="bottom" toTerminal="bottom"> 
          <bendPoints/> 
        </Transition>  
        <Transition from="7" to="13" order="0" desc="" fromTerminal="bottom" toTerminal="top">
          <bendPoints/>
        </Transition>
        <Transition from="4" to="6" order="0" fromTerminal="bottom" toTerminal="top">
          <bendPoints/>
        </Transition>
        <Transition from="13" to="12" order="0" desc="sync" fromTerminal="bottom" toTerminal="top">
          <bendPoints/>
        </Transition>
        <Transition from="13" to="10" order="1" desc="async" fromTerminal="bottom" toTerminal="top">
          <bendPoints/>
        </Transition>
        <Transition from="12" to="14" order="0" fromTerminal="bottom" toTerminal="top"> 
          <bendPoints/> 
        </Transition>
        <Transition from="14" to="6" order="0" fromTerminal="bottom" toTerminal="top">
          <bendPoints/>
        </Transition>
      </Transitions>  
      <Condition/>  
      <Parameter type="java.lang.Iterable" desc="Collection Varable" from="JavaOperation" dynamic="false"> 
        <Value><![CDATA[(com.inzent.igate.message.ValueArray) adapterParameter.getRequestData()]]></Value>  
        <JavaExpression><![CDATA[(com.inzent.igate.message.ValueArray) adapterParameter.getRequestData()]]></JavaExpression> 
      </Parameter>  
      <Parameter type="java.lang.Object" desc="item Variable" from="Variable" dynamic="false"> 
        <Value><![CDATA[valueObject]]></Value> 
      </Parameter>  
      <Parameter type="java.lang.Number" desc="Index Variable" from="Variable" dynamic="false"> 
        <Value><![CDATA[null]]></Value> 
      </Parameter>  
      <Parameter type="java.lang.Number" desc="Start" from="Variable" dynamic="false"> 
        <Value><![CDATA[null]]></Value> 
      </Parameter>  
      <Parameter type="java.lang.Number" desc="End" from="Variable" dynamic="false"> 
        <Value><![CDATA[null]]></Value> 
      </Parameter>  
      <Parameter type="java.lang.Number" desc="Step" from="Variable" dynamic="false"> 
        <Value><![CDATA[null]]></Value> 
      </Parameter> 
    </ForEach>  
    <Activity uniqueKey="000j" index="14" desc="Start Interface" id="StartInterface" xPos="343" yPos="259"> 
      <Parameter type="java.lang.Boolean" desc="Is sync-interface" from="Variable" dynamic="false">
        <Value><![CDATA[sync]]></Value>
      </Parameter>
      <Parameter type="java.lang.Boolean" desc="Is send ack" from="Constant" dynamic="false">
        <Value><![CDATA[false]]></Value>
      </Parameter>
    </Activity>  
    <Condition uniqueKey="000l" index="15" desc="Is Response" xPos="601" yPos="79"> 
      <When target="16" desc="response">
        <MethodExpression variableName="adapterParameter">
          <FunctionExpression className="com.inzent.igate.adapter.AdapterParameter" methodName="isReply" argumentTypes="" argumentType="boolean"/>
        </MethodExpression>
      </When>
      <Others target="17" desc="request"/>
      <Value><![CDATA[
// response
if ( adapterParameter.isReply() ) 
   return 0;
// request
else 
   return 1;]]></Value>
    </Condition>  
    <Activity uniqueKey="000k" index="16" desc="Verify Service Response" id="VerifyServiceResponse" xPos="780" yPos="139"> 
      <Parameter type="com.inzent.igate.repository.meta.InterfaceService" desc="Interface-Service Information" from="Variable" dynamic="false">
        <Value><![CDATA[null]]></Value>
      </Parameter>
    </Activity>  
    <Activity uniqueKey="0007" index="17" desc="Has a result column" id="HasResult" xPos="327" yPos="139"/>
    <Script uniqueKey="000n" index="18" desc="Script" xPos="273" yPos="199">
      <Value><![CDATA[sync = true ;

return 0 ;]]></Value>
    </Script>
    <Script uniqueKey="000o" index="19" desc="Script" xPos="467" yPos="199">
      <Value><![CDATA[sync = false ;

return 0 ;]]></Value>
    </Script>
  </Activities>  
  <Transitions> 
    <Transition from="14" to="13" order="0" fromTerminal="bottom" toTerminal="top"> 
      <bendPoints/> 
    </Transition>  
    <Transition from="0" to="15" order="0" fromTerminal="bottom" toTerminal="top"> 
      <bendPoints/> 
    </Transition>  
    <Transition from="16" to="1" order="0" fromTerminal="bottom" toTerminal="top"> 
      <bendPoints/> 
    </Transition>  
    <Transition from="15" to="16" order="0" desc="response" fromTerminal="bottom" toTerminal="top">
      <bendPoints/>
    </Transition>
    <Transition from="15" to="17" order="1" desc="request" fromTerminal="bottom" toTerminal="top">
      <bendPoints/>
    </Transition>
    <Transition from="17" to="18" order="0" fromTerminal="bottom" toTerminal="top">
      <bendPoints/>
    </Transition>
    <Transition from="17" to="19" order="1" fromTerminal="bottom" toTerminal="top">
      <bendPoints/>
    </Transition>
    <Transition from="18" to="14" order="0" fromTerminal="bottom" toTerminal="top">
      <bendPoints/>
    </Transition>
    <Transition from="19" to="14" order="0" fromTerminal="bottom" toTerminal="top">
      <bendPoints/>
    </Transition>
    <Transition from="13" to="1" order="0" fromTerminal="right" toTerminal="left"> 
      <bendPoints/> 
    </Transition>
  </Transitions> 
</Operation>